# 音视频基础与FFmpeg原理

## 第一章 课程概要

![image-20221127152302513](https://pic-1304959529.cos.ap-guangzhou.myqcloud.com/DB/image-20221127152302513.png)

课程技能：

- 音视频基础知识
- H264编码原理与参数调优
- 实战音视频采集
- 实战音视频编码
- 构建大并发流媒体服务器
- RTMP传输

## 第二章 音视频环境基础

### 2-1 音视频应用的场景

- 直播系统，常用工具

  - ffmpeg
  - ffplay
  - vlc

- 架构模型

  ![image-20221127154506165](https://pic-1304959529.cos.ap-guangzhou.myqcloud.com/DB/image-20221127154506165.png)

### 2-2 推流中断与画质不清晰的解决办法

- 推流中断:

  ![image-20221127155000766](https://pic-1304959529.cos.ap-guangzhou.myqcloud.com/DB/image-20221127155000766.png)

  - 原因：推流时，时间戳错误，音视频被隔离，导致音视频不同步；

  - 解决方法：加入re参数

    ![image-20221127155102634](https://pic-1304959529.cos.ap-guangzhou.myqcloud.com/DB/image-20221127155102634.png)

- 画质不清晰：![image-20221127155146310](https://pic-1304959529.cos.ap-guangzhou.myqcloud.com/DB/image-20221127155146310.png)

  - 原因：-f flv导致ffmpeg对mp4文件进行重新编码再播放，重新编码导致了视频质量降低
  - 解决方案：加入 -c copy参数，表示不让多媒体对流媒体文件重新编码，而是直接进行复制再播放

### 2-3 环境变量设置

- PATH
- PKG_CONFIG_PATH(pkg-config)
- LD_LIBRARAY_PATH

## 第三章 Linux编译ffmpeg

- step1: FFmpeg官网download源码 `https://ffmpeg.org/download.html`

- 进入源码一级目录，设置安装路径

  ```
  ./configure --prefix=/usr/local/ffmpeg --enable-debug=3

- 编译

  ```shell
  make -j8
  ```

- 安装

  ```shell
  make install
  ```

  

 ## 第四章 C语言基础

略

 ## 第五章 音频基础知识



## 第六章 音频采集



## 第七章 音频编码原理



## 第八章 音频编码



## 第九章 视频基础知识



## 第十章 H264编码原理



## 第十一章 视频编码/解码



## 第十二章 RTMP传输



## 第十三章 CDN实现商业娱乐直播

