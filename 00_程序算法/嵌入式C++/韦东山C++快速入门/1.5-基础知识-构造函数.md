# 构造函数

在 C++ 中，构造函数是类的一种特殊类型的成员函数，它会在每次创建类的新对象时执行。构造函数的名称与类名相同，不会返回任何类型，也不会返回 void。构造函数可以有参数，因此可以发生重载。构造函数可用于为某些成员变量设置初始值。构造函数语法如下： 

```c++
class 类名 {
   public:
      类名( ); // 默认构造函数
      类名( 参数列表 ); // 带参构造函数
      类名( const 类名 &obj); // 拷贝构造函数
};
```

其中，`默认构造函数`是没有任何参数的构造函数，如果没有定义任何构造函数，则编译器会提供一个默认的无参构造函数。`带参构造函数`是有参数的构造函数，可以根据参数列表中的参数进行重载。拷贝构造函数是一种特殊的构造函数，在创建新对象时，它初始化新对象为已存在的对象的副本。

参考文献：

- [(1) ＜C++＞搞明白构造函数和析构函数有这一篇就够了-阿里云开发者社区](https://developer.aliyun.com/article/1027808)
- [(2) 构造函数调用规则_调用构造函数_友纪YuKi的博客-CSDN博客.](https://blog.csdn.net/qq_63610563/article/details/124000403)
- [(3) C++构造函数的三种写法 - 知乎 - 知乎专栏. ](https://zhuanlan.zhihu.com/p/168787937)
- [(4) C++ 类构造函数 & 析构函数 | 菜鸟教程](https://www.runoob.com/cplusplus/cpp-constructor-destructor.html)
- [(5) C++之构造函数详解 - 知乎 - 知乎专栏.]( https://zhuanlan.zhihu.com/p/525154159)
- [(6) 【c++类的构造函数】几种写法及问题 - CSDN博客](https://blog.csdn.net/weixin_45677333/article/details/108933364)
- [(7) 【C++】类四大构造函数带示例 - CSDN博客](https://blog.csdn.net/ainu412/article/details/105611407) 
- [(8) C++构造函数（从本质上理解） - C语言中文网](http://c.biancheng.net/view/149.html)
- [(9) C++构造函数概念及使用方法 - CSDN博客.]( https://blog.csdn.net/qq_18837111/article/details/107301281)
- [(10) 构造函数 (C++) | Microsoft Learn.]( https://learn.microsoft.com/zh-cn/cpp/cpp/constructors-cpp?view=msvc-170)



## 例程1:

```c++

#include <iostream>
using namespace std;

class Person {
private:
	char *name;
	int age;
	char *work;

public:

	Person() 
	{
		cout <<"Pserson()"<<endl;
	}
	Person(char *name) 
	{
		cout <<"Pserson(char *)"<<endl;
		this->name = name;
	}

	Person(char *name, int age) 
	{
		cout <<"Pserson(char*, int)"<<endl;
		this->name = name;
		this->age = age;
	}
	
	void setName(char *n)
	{
		name = n;
	}
	int setAge(int a)
	{
		if (a < 0 || a > 150)
		{
			age = 0;
			return -1;
		}
		age = a;
		return 0;
	}
	void printInfo(void)
	{
		//printf("name = %s, age = %d, work = %s\n", name, age, work); 
		cout<<"name = "<<name<<", age = "<<age<<", work = "<<work<<endl;
	}
};

int main(int argc, char **argv)
{
	Person per("zhangsan", 16);
	Person per2; //调用默认构造函数

	per.printInfo();
	
	return 0;
}


```

 ![image-20230501164406798](https://pic-1304959529.cos.ap-guangzhou.myqcloud.com/DB/image-20230501164406798.png)



## 例程2

- 无参函数的构造
- 缺少参数导致的乱码显示

```c++
#include <iostream>
using namespace std;

class Person {
private:
	char *name;
	int age;
	char *work;

public:

	Person() 
	{
		cout <<"Pserson()"<<endl;
	}

	Person(char *name) 
	{
		cout <<"Pserson(char *)"<<endl;
		this->name = name;
	}
    
	/*
	 * 如果构造构造函数没有输入第三个参数，那么work则显示为none
	 */
	Person(char *name, int age, char *work = "none") 
	{
		cout <<"Pserson(char*, int)"<<endl;
		this->name = name;
		this->age = age; 
		this->work = work;
	}

	
	void setName(char *n)
	{
		name = n;
	}
	int setAge(int a)
	{
		if (a < 0 || a > 150)
		{
			age = 0;
			return -1;
		}
		age = a;
		return 0;
	}
	void printInfo(void)
	{
		//printf("name = %s, age = %d, work = %s\n", name, age, work); 
		cout<<"name = "<<name<<", age = "<<age<<", work = "<<work<<endl;
	}
};

int main(int argc, char **argv)
{
	Person per("zhangsan", 16);
	Person per2;   /* 调用无参构造函数 */
	Person per3(); /* int fun();仅仅是声明一个函数,没有发生构造函数的再次调用 */

	per.printInfo();
	return 0;
}

```

构造函数可以重载，由编写的构造函数的参数来决定调用哪个构造函数，如果没有参数则调用默认构造函数。



## 例程3

- 用指针实例化一个C++对象

```c++

#include <iostream>
using namespace std;

class Person {
private:
	char *name;
	int age;
	char *work;

public:

	Person() 
	{
		cout <<"Pserson()"<<endl;
	}
	Person(char *name) 
	{
		cout <<"Pserson(char *)"<<endl;
		this->name = name;
	}

	Person(char *name, int age, char *work = "none")  //表示如果构造函数没有传入第三个参数，则默认参数为none
	{
		cout <<"Pserson(char*, int)"<<endl;
		this->name = name;
		this->age = age;
		this->work = work;
	}

	
	void setName(char *n)
	{
		name = n;
	}
	int setAge(int a)
	{
		if (a < 0 || a > 150)
		{
			age = 0;
			return -1;
		}
		age = a;
		return 0;
	}
	void printInfo(void)
	{
		//printf("name = %s, age = %d, work = %s\n", name, age, work); 
		cout<<"name = "<<name<<", age = "<<age<<", work = "<<work<<endl;
	}
};

int main(int argc, char **argv)
{
	Person per("zhangsan", 16);
	Person per2;   /* 调用无参构造函数  */
	Person per3(); /* int fun(); */

	Person *per4 = new Person;  /* 调用无参构造函数  */
	Person *per5 = new Person();/* 也是调用无参构造函数  */

	Person *per6 = new Person[2];

	Person *per7 = new Person("lisi", 18, "student");
	Person *per8 = new Person("wangwu", 18);

	per.printInfo();
	per7->printInfo();
	per8->printInfo();
	
	//手动释放
	delete per4;
	delete per5;
	delete []per6;
	delete per7; 
	delete per8;

	return 0;
}
```

