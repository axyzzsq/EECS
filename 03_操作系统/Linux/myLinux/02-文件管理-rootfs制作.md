# rootfs的制作

## 一、制作rootfs的方法

有几种方法可以为嵌入式 Linux 系统制作根文件系统 (rootfs)，包括：

1. Buildroot：

   Buildroot 是一种用于构建嵌入式 Linux 系统的流行且广泛使用的工具。这是一种仅使用必要组件创建自定义根文件系统的简单而有效的方法，这使得生成的系统轻量级并针对特定用例进行了优化。Buildroot 有一个文档齐全的配置系统，允许开发人员指定他们想要包含在根文件系统中的包。Buildroot 的优势在于其简单性、灵活性和快速构建时间。缺点是它需要一些 Linux 及其配置文件的知识，并且很难自定义系统的某些方面。

   

2. Yocto Project 和 OpenEmbedded:  

   是嵌入式 Linux 社区中广泛使用的两个密切相关的工具。它们提供了一种高度可定制和模块化的方法来构建嵌入式 Linux 系统。使用 Yocto，开发人员可以创建仅包含他们需要的包和组件的自定义根文件系统，而 OpenEmbedded 提供高度灵活的构建系统，允许开发人员轻松添加和删除包。Yocto 和 OpenEmbedded 的优势在于它们的灵活性、模块化和高度可定制的构建系统。缺点是它们的学习曲线陡峭，设置和使用起来可能很复杂。

   

3. BusyBox:

   是一种轻量级且高度优化的工具，它在单个二进制文件中提供了许多常用的 Linux 实用程序。BusyBox 可用于创建针对特定用例进行优化的小型轻量级根文件系统。BusyBox 的优点是体积小和效率高，这使得它非常适合在嵌入式系统中使用。缺点是它不像 Buildroot 或 Yocto 等其他工具那样灵活或可定制，并且它可能不适合所有用例。

   

4. Debian-based rootfs：

   Debian 是一种流行的 Linux 发行版，广泛用于桌面和服务器环境。Debian 提供了一个维护良好且广泛的软件包存储库，可用于构建自定义根文件系统。使用基于 Debian 的根文件系统的优点是易于使用和高度可定制，具有广泛的可用软件包。缺点是它可能不像其他方法那样轻量或针对特定用例进行优化，并且可能需要更多存储空间。

   

5. Manual creation：用户也可以通过选择需要的包，复制到rootfs目录下，手动创建一个rootfs。

每种方法都有自己的优点和缺点，选择取决于所开发的嵌入式系统的要求和限制。



## 二、制作rootfs的一般性过程

为嵌入式Linux系统制作根文件系统（rootfs）的一般过程如下：

1. 选择基本根文件系统：您可以从最小的 Linux 发行版开始，例如 BusyBox、Buildroot 或 OpenWrt。
2. 自定义根文件系统：根据需要添加、删除或修改文件和目录。这包括添加系统所需的任何应用程序或库。
3. 生成配置文件：系统正常工作需要/etc/fstab、/etc/passwd、/etc/group等配置文件。需要使用适合系统的值生成这些文件。
4. 构建和安装内核：内核需要使用目标硬件的适当配置选项进行编译。生成的内核映像需要安装在根文件系统中。
5. 打包根文件系统：根文件系统需要以一种格式打包，引导加载程序可以使用这种格式将其加载到内存中。常见格式包括 cramfs、squashfs 和 ext4。
6. 闪存根文件系统：打包的根文件系统闪存到目标设备的存储介质上。

## Example

[【使用busybox制作根文件系统】](https://blog.csdn.net/weixin_59665492/article/details/118681742?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522167637829216800213036426%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&request_id=167637829216800213036426&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduend~default-2-118681742-null-null.142^v73^insert_down2,201^v4^add_ask,239^v1^control&utm_term=%E6%A0%B9%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%88%B6%E4%BD%9C&spm=1018.2226.3001.4187)

