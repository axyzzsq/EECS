# 51单片机报错

### idata 和 xdata
> 1. 平台：芯圣HC89S003
> 2. 前置条件：定义一个idata char var;在头文件中extern char var外传变量;
> 3. 报错：ERROR L103: EXTERNAL ATTRIBUT DO NOT MATCH PUBLIC
> 4. 原因分析：默认定义变量是xdata，在xdata的ram区域找不到var变量，故而报错。
> 5. 修复方法：extern idata char var


### 关于EA
> 1. 平台：芯圣HC89S003/芯圣HC89F0431
> 2. 前置条件：定时器初始化和串口初始化都有EA=1
> 3. 报错：TDE代码的case情况足够多的时候，定时器挂掉，时间片中断进不去
> 4. 原因分析：
> 5. 修复方法：把定时器和串口初始化的中断去掉，在main()上电EA=1
> 6. 总结：Flash操作的时候需要把EA置位复位，在上电是开总中断，其他的地方不做操作 
