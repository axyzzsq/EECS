# 第13讲-Linux链接文件

## 一、Linux链接文件

- Linux有两种链接文件：符号链接(软连接)和硬链接，符号链接类似windows下的快捷键方式。硬链接通过文件系统的inode链接来产生新的文件名，而不是新文件。

- inode：记录文件属性，一个文件一个inode。inode相当于文件ID,查找文件的时候要先查找到inode，然后才能读出文件的内容。

  

## 二、ln命令

- ln命令用于创建链接文件

  `ln [选项] 源文件 目标文件`

  [选项] -s 创建符号链接(软链接)，不加s默认创建硬链接

  ​            -f 强制创建链接,如果目标存在，那么先删除掉目标文件，然后在建立新的链接文件。

## 三、硬链接

硬链接是多个文件都指向同一个inode。硬链接的知识点：

> 1. 具有相同的inode的多个文件互为硬链接文件，创建硬链接相当于文件实体多了入口;如下图，通过ln创建的hello的两个硬链接hello1、hello2和hello的inode相同，均为860925；
> 2. 对于硬链接文件，只有删除了源文件以及对应的所有硬链接文件，文件实体才会被删除;如下图所示，hello实体被删除之后，硬链接文件hello1依旧可以执行。
> 3. 根据硬链接文件的特点，我们可以通过给文件创建硬链接的方式来防止文件被误删;
> 4. 不论修改源文件还是链接文件，另外一个文件的数据都会被改变(一个文本创建硬连接，修改内容之后，硬链接文本内容被修改)；
> 5. 硬链接不能跨文件系统；
> 6. 硬链接不能连接到目录；

![](https://pic-1304959529.cos.ap-guangzhou.myqcloud.com/DB/20220326192854.png)

*由于以上这些特性的限制，硬链接不常使用。*

## 四、符号链接(软连接)

符号链接类似于windows的快捷方式，符号链接也叫做软连接。软链接相当于创建了一个独立的文件(如下图所示，硬链接hello1和源文件hello的inode相同，软链接hello2有独立的inode)，这个文件会让数据读取指向它链接的那个文件的文件名。

![](https://pic-1304959529.cos.ap-guangzhou.myqcloud.com/DB/20220326192916.png)

软链接的特点：

> 1. 可以链接到目录；
> 2. 可以跨文件系统；
> 3. 删除源文件之后，软链接文件也就失效；
> 4. 符号链接文件通过 -> 来指向具体的链接文件；
> 5. 符号链接时源文件要使用绝对路径，否则经过拷贝到其他目录之后，它的软连接属性将会消失。如下图所示：

![](https://pic-1304959529.cos.ap-guangzhou.myqcloud.com/DB/20220326192931.png)

软链接创建：

![](https://pic-1304959529.cos.ap-guangzhou.myqcloud.com/DB/20220326192943.png)

> 【归纳】
>
> 1. 创建软链接时候的源文件使用绝对路径保证软链接的可移植性；
> 2. 拷贝命令要加参数 -d，否则失去链接属性拷贝文件，拷贝过去的是一个硬链接；通过`ll -i`查看特性可知。

